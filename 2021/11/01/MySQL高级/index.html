<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/GameWill.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/GameWill.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/GameWill.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/GameWill.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/GameWill.github.io/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/GameWill.github.io/","images":"/GameWill.github.io/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/GameWill.github.io/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/GameWill.github.io/js/config.js"></script>
<meta name="description" content="MySQL是一种关系型数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型和大型网站的开发都选择 MySQL 作为网站数据库。MySQL5">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL高级">
<meta property="og:url" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/index.html">
<meta property="og:site_name" content="L Blog">
<meta property="og:description" content="MySQL是一种关系型数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型和大型网站的开发都选择 MySQL 作为网站数据库。MySQL5">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_Ck-rGZ_xBu.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image__ERGJFoCE2.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_7VOK35CBem.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_Dq-Ph-1o0r.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_xHMC4fbDYB.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_xwaKHdJqT_.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_vzZLNxJ204.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_Yu_5iisZGr.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_1SwtXWU0Mn.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_y3WSPBmWOg.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_V9xyFVMTnh.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_RFxXLn6pPE.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_5cjl91qq_V.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_MOAboeV7_e.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_3v2921di9p.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_PATJ7CG1vR.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_QF4j97FRlW.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_A3u3stOuI5.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_jTB6VOYx-O.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_cq-8jr_NAv.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_xzWkeRRbun.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_lrT0krMyNu.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_v_TCb7_z6-.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_JSmoYXRPwz.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_tmztzZBAjY.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_du4G4s6J-y.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_aGTnMxUWho.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_IE6p8xzJWs.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_b8gFbCNPuf.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_HzVHL_eRZQ.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_BYlZaMyFFs.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_KpUva78a5n.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_SH1hWrOVBd.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_16V4uKYSlp.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image__BN2RtYTWg.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_UbYn-CLnFu.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_795E1c69X3.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_vNfxSL0KHW.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_osmerq__RZ.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_C0I-jgeBgt.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_gBkVIrEzq_.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_wTw4YxbRd0.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_02xUAV97lH.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_zpbT_jm6p5.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_LKt4beTSmW.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_UWtYawlMdJ.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_DHxd0zam39.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_Q2deVE7hI2.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_PEogbOQFgC.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_ooIFXUStBN.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_6mqH39QxMX.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_bFHK7TDpcl.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_ATGfX9FwDj.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_NgjYWUggv1.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_SzZAIvzcLh.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_7qo1X1iKt9.png">
<meta property="og:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_RhOCvs8QDZ.png">
<meta property="article:published_time" content="2021-11-01T11:47:13.000Z">
<meta property="article:modified_time" content="2022-05-10T14:01:58.775Z">
<meta property="article:author" content="Little Will">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="MySQL高级">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/image/image_Ck-rGZ_xBu.png">


<link rel="canonical" href="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/","path":"2021/11/01/MySQL高级/","title":"MySQL高级"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MySQL高级 | L Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/GameWill.github.io/css/noscript.css">
  </noscript>
<link rel="alternate" href="/GameWill.github.io/atom.xml" title="L Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/GameWill.github.io/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">L Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Record growth.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/GameWill.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-categories"><a href="/GameWill.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-tags"><a href="/GameWill.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E9%AB%98%E7%BA%A7"><span class="nav-number">1.</span> <span class="nav-text">MySQL高级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">2.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">2.1.</span> <span class="nav-text">索引是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BC%98%E5%8A%A3%E5%8A%BF"><span class="nav-number">2.2.</span> <span class="nav-text">索引的优劣势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%9A%84%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">MySQL的索引结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#x20-B-tree%E7%B4%A2%E5%BC%95"><span class="nav-number">2.3.1.</span> <span class="nav-text"> B-tree索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x20-B-tree%E7%B4%A2%E5%BC%95-1"><span class="nav-number">2.3.2.</span> <span class="nav-text"> B+tree索引</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x20-%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E5%92%8C%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="nav-number">2.4.</span> <span class="nav-text"> 聚簇索引和非聚簇索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="nav-number">2.5.</span> <span class="nav-text">MySQL索引分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E5%80%BC%E7%B4%A2%E5%BC%95-INDEX"><span class="nav-number">2.5.1.</span> <span class="nav-text">单值索引 INDEX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="nav-number">2.5.2.</span> <span class="nav-text">唯一索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95"><span class="nav-number">2.5.3.</span> <span class="nav-text">主键索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95"><span class="nav-number">2.5.4.</span> <span class="nav-text">复合索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x20-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">2.5.5.</span> <span class="nav-text"> 基本语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x20-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E6%97%B6%E6%9C%BA"><span class="nav-number">2.6.</span> <span class="nav-text"> 索引的创建时机</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E5%90%88%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">2.6.1.</span> <span class="nav-text">适合创建索引的情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E9%80%82%E5%90%88%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">2.6.2.</span> <span class="nav-text">不适合创建索引的情况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">2.7.</span> <span class="nav-text">常见索引失效</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%80%BC%E5%8C%B9%E9%85%8D%E6%88%91%E6%9C%80%E7%88%B1"><span class="nav-number">2.7.1.</span> <span class="nav-text">全值匹配我最爱</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E6%B3%95%E5%88%99"><span class="nav-number">2.7.2.</span> <span class="nav-text">最佳左前缀法则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x20-%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%8A%E5%81%9A%E8%AE%A1%E7%AE%97"><span class="nav-number">2.7.3.</span> <span class="nav-text"> 索引列上做计算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%8A%E8%BF%9B%E8%A1%8C%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.4.</span> <span class="nav-text">索引列上进行范围查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95"><span class="nav-number">2.7.5.</span> <span class="nav-text">使用覆盖索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%8D%E7%AD%89%E4%BA%8E-%E6%88%96%E8%80%85-lt-gt"><span class="nav-number">2.7.6.</span> <span class="nav-text">使用不等于(!&#x3D; 或者&lt;&gt;)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#is-not-null-%E5%92%8C-is-null"><span class="nav-number">2.7.7.</span> <span class="nav-text">is not null 和 is null</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x20-like%E7%9A%84%E5%89%8D%E5%90%8E%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D"><span class="nav-number">2.7.8.</span> <span class="nav-text"> like的前后模糊匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8or"><span class="nav-number">2.7.9.</span> <span class="nav-text">使用or</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0"><span class="nav-number">2.7.10.</span> <span class="nav-text">练习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%A3%E8%AF%80"><span class="nav-number">2.7.11.</span> <span class="nav-text">口诀</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Explain%E5%AD%97%E6%AE%B5%E5%88%86%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">Explain字段分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8Bid"><span class="nav-number">3.1.</span> <span class="nav-text">Explain 之id</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8Bselect-type"><span class="nav-number">3.2.</span> <span class="nav-text">Explain 之select_type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8Btype"><span class="nav-number">3.3.</span> <span class="nav-text">Explain 之type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8Bpossible-keys"><span class="nav-number">3.4.</span> <span class="nav-text">Explain 之possible_keys</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x20-Explain-%E4%B9%8B-key"><span class="nav-number">3.5.</span> <span class="nav-text"> Explain 之 key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x20-Explain-%E4%B9%8B-key-len"><span class="nav-number">3.6.</span> <span class="nav-text"> Explain 之 key_len</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x20-Explain-%E4%B9%8B-ref"><span class="nav-number">3.7.</span> <span class="nav-text"> Explain 之 ref</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8B-rows"><span class="nav-number">3.8.</span> <span class="nav-text">Explain 之 rows</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Explain-%E4%B9%8B-Extra-x20"><span class="nav-number">3.9.</span> <span class="nav-text">Explain 之 Extra </span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">4.</span> <span class="nav-text">存储引擎</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Little Will"
      src="/GameWill.github.io/images/wuhuang.jpg">
  <p class="site-author-name" itemprop="name">Little Will</p>
  <div class="site-description" itemprop="description">God helps those who help themselves.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/GameWill.github.io/archives/">
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/GameWill.github.io/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/GameWill.github.io/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/LittleWills" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://github.com/LittleWills/GameWill.github.io.git/2021/11/01/MySQL%E9%AB%98%E7%BA%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/GameWill.github.io/images/wuhuang.jpg">
      <meta itemprop="name" content="Little Will">
      <meta itemprop="description" content="God helps those who help themselves.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="L Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL高级
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-01 19:47:13" itemprop="dateCreated datePublished" datetime="2021-11-01T19:47:13+08:00">2021-11-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/GameWill.github.io/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/GameWill.github.io/categories/MySQL/MySQL%E9%AB%98%E7%BA%A7/" itemprop="url" rel="index"><span itemprop="name">MySQL高级</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>12 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <hr>
<blockquote>
<p>MySQL是一种关系型数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型和大型网站的开发都选择 MySQL 作为网站数据库。MySQL5 支持事务、视图、存储过程、触发器等。</p>
</blockquote>
<span id="more"></span>
<h1 id="MySQL高级"><a href="#MySQL高级" class="headerlink" title="MySQL高级"></a>MySQL高级</h1><h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><h2 id="索引是什么"><a href="#索引是什么" class="headerlink" title="索引是什么"></a>索引是什么</h2><p>MySQL官方对索引的定义为：索引(Index)是帮助MySQL高效获取数据的数据结构。可以得到索引的本质：索引是数据结构。可以简单理解为排好序的快速查找数据结构。</p>
<p>在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用(指向)数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。下图就是一种可能的索引方式示例：</p>
<p><img src="image/image_Ck-rGZ_xBu.png" alt="image"></p>
<p>左边是数据表，一共有两列七条记录，最左边的是数据记录的物理地址。为了加快Col2的查找，可以维护一个右边所示的二叉查找树，每个节点分别包含索引键值和一个指向对应数据记录物理地址的指针，这样就可以运用二叉查找在一定的复杂度内获取到相应数据，从而快速的检索出符合条件的记录。</p>
<p>一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。</p>
<h2 id="索引的优劣势"><a href="#索引的优劣势" class="headerlink" title="索引的优劣势"></a>索引的优劣势</h2><p>优点：</p>
<p>提高数据检索的效率，降低数据库的IO成本；通过索引列对数据进行排序，降低数据排序的成本，降低了CPU的消耗。</p>
<p>劣势：</p>
<p>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为更新所带来的键值变化后的索引信息。实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的。</p>
<h2 id="MySQL的索引结构"><a href="#MySQL的索引结构" class="headerlink" title="MySQL的索引结构"></a>MySQL的索引结构</h2><h3 id="x20-B-tree索引"><a href="#x20-B-tree索引" class="headerlink" title="&#x20;B-tree索引"></a>&#x20;B-tree索引</h3><p><img src="image/image__ERGJFoCE2.png" alt="image"></p>
<p>一颗b树，浅蓝色的块我们称之为一个磁盘块，可以看到每个磁盘块包含几个数据项（深蓝色所示）和指针（黄色所示），如磁盘块1包含数据项17和35，包含指针P1、P2、P3，P1表示小于17的磁盘块，P2表示在17和35之间的磁盘块，P3表示大于35的磁盘块。</p>
<p>如果要查找数据项29，那么首先会把磁盘块1由磁盘加载到内存，此时发生一次IO，在内存中用二分查找确定29在17和35之间，锁定磁盘块1的P2指针，内存时间因为非常短（相比磁盘的IO）可以忽略不计，通过磁盘块1的P2指针的磁盘地址把磁盘块3由磁盘加载到内存，发生第二次IO，29在26和30之间，锁定磁盘块3的P2指针，通过指针加载磁盘块8到内存，发生第三次IO，同时内存中做二分查找找到29，结束查询，总计三次IO。</p>
<h3 id="x20-B-tree索引-1"><a href="#x20-B-tree索引-1" class="headerlink" title="&#x20;B+tree索引"></a>&#x20;B+tree索引</h3><p><img src="image/image_7VOK35CBem.png" alt="image"></p>
<p>&#x20;B+树的非叶子结点仅仅存储着关键字信息和叶子的指针，B+树中的数据都存储在叶子结点上，也就是其所有叶子结点的数据组合起来就是完整的数据.因此每个磁盘块包含的关键字信息会更多。这样也就决定了加载一个磁盘块可以获取到更多的关键字，可以减少IO操作，一次IO操作相当于成百上千次的内存比较.在B+树上增加了顺序访问指针，也就是每个叶子节点增加一个指向相邻叶子节点的指针，这样一棵树成了数据库系统实现索引的首选数据结构。</p>
<p><strong>B-Tree与B+Tree 的区别</strong></p>
<p>B-树的关键字和记录是放在一起的， B+树的非叶子节点中只有关键字和指向下一个节点的索引，记录只放在叶子节点中。</p>
<p>在B-树中，越靠近根节点的记录查找时间越快，只要找到关键字即可确定记录的存在；而B+树中每个记录的查找时间基本是一样的，都需要从根节点走到叶子节点，而且在叶子节点中还要再比较关键字。从这个角度看B-树的性能好像要比B+树好，而在实际应用中却是B+树的性能要好些。因为B+树的非叶子节点不存放实际的数据，这样每个节点可容纳的元素个数比B-树多，树高比B-树小，这样带来的好处是减少磁盘访问次数。尽管B+树找到一个记录所需的比较次数要比B-树多，但是一次磁盘访问的时间相当于成百上千次内存比较的时间，因此实际中B+树的性能可能还会好些，而且B+树的叶子节点使用指针连接在一起，方便顺序遍历（例如查看一个目录下的所有文件，一个表中的所有记录等），这也是很多数据库和文件系统使用B+树的缘故。</p>
<p><strong>为什么说B+树比B-树更适合实际应用中操作系统的文件索引和数据库索引？</strong>&#x20;</p>
<p>B+树的磁盘读写代价更低&#x20;</p>
<p>B+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对B 树更小。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说IO读写次数也就降低了。&#x20;</p>
<p>B+树的查询效率更加稳定&#x20;</p>
<p>由于非终结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p>
<h2 id="x20-聚簇索引和非聚簇索引"><a href="#x20-聚簇索引和非聚簇索引" class="headerlink" title="&#x20;聚簇索引和非聚簇索引"></a>&#x20;聚簇索引和非聚簇索引</h2><p>聚簇索引并不是一种单独的索引类型，而是一种数据存储方式。术语‘聚簇’表示数据行和相邻的键值聚簇的存储在一起。如下图，左侧的索引就是聚簇索引，因为数据行在磁盘的排列和索引排序保持一致。</p>
<p><img src="image/image_Dq-Ph-1o0r.png" alt="image"></p>
<p>聚簇索引的好处</p>
<p>按照聚簇索引排列顺序，查询显示一定范围数据的时候，由于数据都是紧密相连，数据库不用从多个数据块中提取数据，所以节省了大量的io操作。</p>
<p>聚簇索引的限制</p>
<p>对于mysql数据库目前只有innodb数据引擎支持聚簇索引,而Myisam并不支持聚簇索引。</p>
<p>为了充分利用聚簇索引的聚簇的特性，所以innodb表的主键列尽量选用有序的顺序id，而不建议用无序的id，比如uuid这种。</p>
<h2 id="MySQL索引分类"><a href="#MySQL索引分类" class="headerlink" title="MySQL索引分类"></a>MySQL索引分类</h2><h3 id="单值索引-INDEX"><a href="#单值索引-INDEX" class="headerlink" title="单值索引 INDEX"></a>单值索引 INDEX</h3><p>即一个索引只包含单个列，一个表可以有多个单列索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 随表一起创建：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">  id <span class="type">INT</span>(<span class="number">10</span>) AUTO_INCREMENT ,</span><br><span class="line">  customer_no <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  customer_name <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(id),</span><br><span class="line">  KEY (customer_name)</span><br><span class="line">);</span><br><span class="line"># 单独建单值索引：</span><br><span class="line"><span class="keyword">CREATE</span>  INDEX idx_customer_name <span class="keyword">ON</span> customer(customer_name);</span><br><span class="line"># 查看某个表的索引</span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> 表名   </span><br><span class="line"><span class="keyword">show</span> keys <span class="keyword">from</span>  表名</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h3><p>索引列的值必须唯一，但允许有空值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 随表一起创建：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">  id <span class="type">INT</span>(<span class="number">10</span>)  AUTO_INCREMENT ,</span><br><span class="line">  customer_no</span><br><span class="line">  <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  customer_name <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(id),</span><br><span class="line">  KEY (customer_name),</span><br><span class="line">  <span class="keyword">UNIQUE</span> (customer_no)</span><br><span class="line">);</span><br><span class="line"># 单独建唯一索引：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX idx_customer_no <span class="keyword">ON</span> customer(customer_no);</span><br></pre></td></tr></table></figure>

<h3 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a>主键索引</h3><p>设定为主键后数据库会自动建立索引，innodb为聚簇索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 随表一起建索引</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line"> id <span class="type">INT</span>(<span class="number">10</span>) AUTO_INCREMENT ,</span><br><span class="line"> customer_no</span><br><span class="line"> <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line"> customer_name <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line"> <span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">);</span><br><span class="line"># 单独建主键索引：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> customer <span class="keyword">add</span> <span class="keyword">PRIMARY</span> KEY customer(customer_no);</span><br><span class="line"># 删除建主键索引：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> customer <span class="keyword">drop</span> <span class="keyword">PRIMARY</span> KEY ;</span><br><span class="line"># 需要注意的问题：设置为自增的主键上的索引不能删除.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="复合索引"><a href="#复合索引" class="headerlink" title="复合索引"></a>复合索引</h3><p>即一个索引包含多个列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 随表一起建索引：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">  id <span class="type">INT</span>(<span class="number">10</span>)  AUTO_INCREMENT ,</span><br><span class="line">  customer_no <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  customer_name <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(id),</span><br><span class="line">  KEY (customer_name),</span><br><span class="line">  <span class="keyword">UNIQUE</span> (customer_name),</span><br><span class="line">  KEY (customer_no,customer_name)</span><br><span class="line">);</span><br><span class="line"># 单独建索引：</span><br><span class="line"><span class="keyword">CREATE</span>  INDEX idx_no_name <span class="keyword">ON</span> customer(customer_no,customer_name);</span><br></pre></td></tr></table></figure>

<h3 id="x20-基本语法"><a href="#x20-基本语法" class="headerlink" title="&#x20;基本语法"></a>&#x20;基本语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 创建</span><br><span class="line"><span class="keyword">CREATE</span>  [<span class="keyword">UNIQUE</span> ]  INDEX [indexName] <span class="keyword">ON</span> table_name(<span class="keyword">column</span>))</span><br><span class="line"># 删除</span><br><span class="line"><span class="keyword">DROP</span> INDEX [indexName] <span class="keyword">ON</span> mytable;</span><br><span class="line"># 查看</span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> table_name</span><br><span class="line"># 使用<span class="keyword">Alter</span>命令</span><br><span class="line"># 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为<span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (column_list)</span><br><span class="line"># 添加普通索引，索引值可出现多次</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> INDEX index_name (column_list)</span><br><span class="line"># 该语句指定了索引为 FULLTEXT ，用于全文索引</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> FULLTEXT index_name (column_list)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="x20-索引的创建时机"><a href="#x20-索引的创建时机" class="headerlink" title="&#x20;索引的创建时机"></a>&#x20;索引的创建时机</h2><h3 id="适合创建索引的情况"><a href="#适合创建索引的情况" class="headerlink" title="适合创建索引的情况"></a>适合创建索引的情况</h3><ul>
<li><p>  主键自动建立唯一索引；</p>
</li>
<li><p>  频繁作为查询条件的字段应该创建索引；</p>
</li>
<li><p>  查询中与其它表关联的字段，外键关系建立索引；</p>
</li>
<li><p>  单键/组合索引的选择问题， 组合索引性价比更高；</p>
</li>
<li><p>  查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度；</p>
</li>
<li><p>  查询中统计或者分组字段；</p>
</li>
<li><p>  查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度。</p>
</li>
</ul>
<h3 id="不适合创建索引的情况"><a href="#不适合创建索引的情况" class="headerlink" title="不适合创建索引的情况"></a>不适合创建索引的情况</h3><ul>
<li><p>  表记录太少；</p>
</li>
<li><p>  经常增删改的表或者字段；</p>
</li>
<li><p>  Where条件里用不到的字段不创建索引；</p>
</li>
<li><p>  过滤性不好的不适合建索引；</p>
</li>
</ul>
<h2 id="常见索引失效"><a href="#常见索引失效" class="headerlink" title="常见索引失效"></a>常见索引失效</h2><h3 id="全值匹配我最爱"><a href="#全值匹配我最爱" class="headerlink" title="全值匹配我最爱"></a>全值匹配我最爱</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 建立索引</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_age_deptid_name <span class="keyword">ON</span> emp(age,deptid,NAME);</span><br><span class="line"># 查看下列<span class="keyword">sql</span>的Explian</span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span>  </span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span> <span class="keyword">and</span> deptid<span class="operator">=</span><span class="number">4</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span> <span class="keyword">and</span> deptid<span class="operator">=</span><span class="number">4</span> <span class="keyword">AND</span> emp.name <span class="operator">=</span> <span class="string">&#x27;abcd&#x27;</span>  </span><br></pre></td></tr></table></figure>

<p><img src="image/image_xHMC4fbDYB.png" alt="image"></p>
<p><img src="image/image_xwaKHdJqT_.png" alt="image"></p>
<p><img src="image/image_vzZLNxJ204.png" alt="image"></p>
<p><strong>结论：全职匹配我最爱指的是，查询的字段按照顺序在索引中都可以匹配到！</strong></p>
<p>更换条件顺序查看索引能否被应用</p>
<p><img src="image/image_Yu_5iisZGr.png" alt="image"></p>
<p><strong>结论：SQL中查询字段的顺序，跟使用索引中字段的顺序没有关系。</strong></p>
<h3 id="最佳左前缀法则"><a href="#最佳左前缀法则" class="headerlink" title="最佳左前缀法则"></a>最佳左前缀法则</h3><p>使用复合索引，需要遵循最佳左前缀法则，即如果索引了多列，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且不跳过索引中的列。</p>
<p><img src="image/image_1SwtXWU0Mn.png" alt="image"></p>
<p><strong>结论：过滤条件要使用索引必须按照索引建立时的顺序，依次满足，一旦跳过某个字段，索引后面的字段都无法被使用</strong></p>
<h3 id="x20-索引列上做计算"><a href="#x20-索引列上做计算" class="headerlink" title="&#x20;索引列上做计算"></a>&#x20;索引列上做计算</h3><p>不在索引列上做任何操作（计算、函数、(自动or手动)类型转换），会导致索引失效而转向全表扫描</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 在查询列上使用了函数</span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> age<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">LEFT</span>(age,<span class="number">3</span>)<span class="operator">=</span><span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_y3WSPBmWOg.png" alt="image"></p>
<p><strong>结论：等号左边无计算！</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 在查询列上做了转换</span><br><span class="line"><span class="keyword">create</span> index idx_name <span class="keyword">on</span> emp(name);</span><br><span class="line">explain <span class="keyword">select</span> sql_no_cache <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;30000&#x27;</span>;</span><br><span class="line">explain <span class="keyword">select</span> sql_no_cache <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name<span class="operator">=</span><span class="number">30000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_V9xyFVMTnh.png" alt="image"></p>
<p><strong>结论：等号右边无转换！</strong></p>
<h3 id="索引列上进行范围查询"><a href="#索引列上进行范围查询" class="headerlink" title="索引列上进行范围查询"></a>索引列上进行范围查询</h3><p>&#x20;在索引列上使用范围查询（存储引擎不能使用索引中范围条件右边的列）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span> <span class="keyword">and</span> deptid<span class="operator">=</span><span class="number">5</span> <span class="keyword">AND</span> emp.name <span class="operator">=</span> <span class="string">&#x27;abcd&#x27;</span>;</span><br><span class="line">explain <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span> <span class="keyword">and</span> deptid<span class="operator">&lt;</span><span class="number">5</span> <span class="keyword">AND</span> emp.name <span class="operator">=</span> <span class="string">&#x27;abcd&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_RFxXLn6pPE.png" alt="image"></p>
<p><strong>建议：将可能做范围查询的字段的索引顺序放在最后</strong></p>
<h3 id="使用覆盖索引"><a href="#使用覆盖索引" class="headerlink" title="使用覆盖索引"></a>使用覆盖索引</h3><p>查询列和索引列时，不要写select （尽量使用覆盖索引（只访问索引的查询（索引列和查询列一致）））<em>，</em> 减少select。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">explain  <span class="keyword">SELECT</span> SQL_NO_CACHE <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span>  <span class="keyword">and</span> deptId<span class="operator">=</span><span class="number">4</span> <span class="keyword">and</span> name<span class="operator">=</span><span class="string">&#x27;XamgXt&#x27;</span>;</span><br><span class="line">explain  <span class="keyword">SELECT</span> SQL_NO_CACHE age,deptId,name  <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.age<span class="operator">=</span><span class="number">30</span>  <span class="keyword">and</span> deptId<span class="operator">=</span><span class="number">4</span> <span class="keyword">and</span> name<span class="operator">=</span><span class="string">&#x27;XamgXt&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_5cjl91qq_V.png" alt="image"></p>
<h3 id="使用不等于-或者-lt-gt"><a href="#使用不等于-或者-lt-gt" class="headerlink" title="使用不等于(!= 或者&lt;&gt;)"></a>使用不等于(!= 或者&lt;&gt;)</h3><p>使用不等于(!= 或者&lt;&gt;)时，有时会无法使用索引会导致全表扫描。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">select</span> SQL_NO_CACHE <span class="operator">*</span>  <span class="keyword">from</span> emp <span class="keyword">where</span> emp.age <span class="operator">=</span> <span class="number">30</span> ;</span><br><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">select</span> SQL_NO_CACHE <span class="operator">*</span>  <span class="keyword">from</span> emp <span class="keyword">where</span> emp.age <span class="operator">!=</span> <span class="number">30</span> ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_MOAboeV7_e.png" alt="image"></p>
<h3 id="is-not-null-和-is-null"><a href="#is-not-null-和-is-null" class="headerlink" title="is not null 和 is null"></a>is not null 和 is null</h3><p>查看索引字段是否允许为空</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> emp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当字段允许为Null的条件下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<p><img src="image/image_3v2921di9p.png" alt="image"></p>
<p><strong>结论：is not null用不到索引，is null可以用到索引。</strong></p>
<h3 id="x20-like的前后模糊匹配"><a href="#x20-like的前后模糊匹配" class="headerlink" title="&#x20;like的前后模糊匹配"></a>&#x20;like的前后模糊匹配</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_name_emp <span class="keyword">on</span> emp (name);</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%a&#x27;</span> ;</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span> ;</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span> ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_PATJ7CG1vR.png" alt="image"></p>
<p><strong>结论：前缀模糊查询会导致索引失效</strong></p>
<h3 id="使用or"><a href="#使用or" class="headerlink" title="使用or"></a>使用or</h3><p>OR查询会导致索引失效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">30</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">40</span>;</span><br></pre></td></tr></table></figure>

<p>使用union all或者union来替代</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">30</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">40</span> ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_QF4j97FRlW.png" alt="image"></p>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><table>
<thead>
<tr>
<th>Where语句</th>
<th>索引是否被使用</th>
</tr>
</thead>
<tbody><tr>
<td>where a = 3</td>
<td>Y,使用到a</td>
</tr>
<tr>
<td>where a = 3 and b = 5</td>
<td>Y,使用到a，b</td>
</tr>
<tr>
<td>where a = 3 and b = 5 and c = 4</td>
<td>Y,使用到a,b,c</td>
</tr>
<tr>
<td>where b = 3 或者 where b = 3 and c = 4  或者 where c = 4</td>
<td>N</td>
</tr>
<tr>
<td>where a = 3 and c = 5</td>
<td>使用到a， 但是c不可以，b中间断了</td>
</tr>
<tr>
<td>where a = 3 and b &gt; 4 and c = 5</td>
<td>使用到a和b， c不能用在范围之后，b断了</td>
</tr>
<tr>
<td>where a is null and b is not null</td>
<td>is null 支持索引 但是is not null 不支持,所以 a 可以使用索引,但是  b不可以使用</td>
</tr>
<tr>
<td>where a &lt;&gt; 3</td>
<td>不能使用索引</td>
</tr>
<tr>
<td>where   abs(a) =3</td>
<td>不能使用 索引</td>
</tr>
<tr>
<td>where a = 3 and b like ‘kk%’ and c = 4</td>
<td>Y,使用到a,b,c</td>
</tr>
<tr>
<td>where a = 3 and b like ‘%kk’ and c = 4</td>
<td>Y,只用到a</td>
</tr>
<tr>
<td>where a = 3 and b like ‘%kk%’ and c = 4</td>
<td>Y,只用到a</td>
</tr>
<tr>
<td>where a = 3 and b like ‘k%kk%’ and c = 4</td>
<td>Y,使用到a,b,c</td>
</tr>
</tbody></table>
<h3 id="口诀"><a href="#口诀" class="headerlink" title="口诀"></a>口诀</h3><p>全值匹配我最爱，最左前缀要遵守；</p>
<p>带头大哥不能死，中间兄弟不能断；</p>
<p>索引列上少计算，范围之后全失效；</p>
<p>LIKE百分写最右，覆盖索引不写*；</p>
<p>不等空值还有OR，索引影响要注意；</p>
<h1 id="Explain字段分析"><a href="#Explain字段分析" class="headerlink" title="Explain字段分析"></a>Explain字段分析</h1><h2 id="Explain-之id"><a href="#Explain-之id" class="headerlink" title="Explain 之id"></a>Explain 之id</h2><p>id:  select查询的序列号,包含一组数字，表示查询中执行select子句或操作表的顺序。</p>
<p>d相同：执行顺序由上至下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1,t2,t3 <span class="keyword">where</span> t1.id <span class="operator">=</span> t2.id <span class="keyword">and</span> t2.id <span class="operator">=</span> t3.id ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_A3u3stOuI5.png" alt="image"></p>
<p>id不同：如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t1.id <span class="keyword">from</span> t1 <span class="keyword">where</span> t1.id <span class="keyword">in</span></span><br><span class="line">  (<span class="keyword">select</span> t2.id <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.id <span class="keyword">in</span></span><br><span class="line">  (<span class="keyword">select</span> t3.id <span class="keyword">from</span> t3 <span class="keyword">where</span> t3.content <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="image/image_jTB6VOYx-O.png" alt="image"></p>
<p>MySQL5.5结果</p>
<p><img src="image/image_cq-8jr_NAv.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.<span class="operator">*</span> <span class="keyword">from</span> t2 ,(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t3 <span class="keyword">where</span> t3.content <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>) s3 <span class="keyword">where</span> s3.id <span class="operator">=</span> t2.id ;</span><br><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 ;</span><br></pre></td></tr></table></figure>

<p>MySQL5.5的结果</p>
<p><img src="image/image_xzWkeRRbun.png" alt="image"></p>
<p>id如果相同，可以认为是一组，从上往下顺序执行；</p>
<p>在所有组中，id值越大，优先级越高，越先执行 。</p>
<p>id号每个号码，表示一趟独立的查询。一个sql 的查询趟数越少越好。</p>
<h2 id="Explain-之select-type"><a href="#Explain-之select-type" class="headerlink" title="Explain 之select_type"></a>Explain 之select_type</h2><p>select_type : 主要用于区别普通查询、联合查询、子查询等的复杂查询。(1) SIMPLE：代表单表查询，查询中不包含子查询或者UNION。</p>
<p><img src="image/image_lrT0krMyNu.png" alt="image"></p>
<p>&#x20;PRIMARY：查询中若包含任何复杂的子部分，最外层查询则被标记为Primary。</p>
<p><img src="image/image_v_TCb7_z6-.png" alt="image"></p>
<p>MySQL5.5结果</p>
<p><img src="image/image_JSmoYXRPwz.png" alt="image"></p>
<p>DERIVED：在FROM查询中的子查询，被标记为DERIVED，MySQL会递归执行这些子查询，把结果存放在临时表中。</p>
<p>SUBQUERY：在WHERE列表中包含了子查询。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.id <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.id <span class="operator">=</span> ( <span class="keyword">select</span> t3.id <span class="keyword">from</span> t3 <span class="keyword">where</span> t3.id <span class="operator">=</span> <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><img src="image/image_tmztzZBAjY.png" alt="image"></p>
<p>DEPENDENT SUBQUERY：在SELECT或WHERE列表中包含了子查询,子查询基于外层。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.id <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.id <span class="keyword">in</span> (<span class="keyword">select</span> t3.id <span class="keyword">from</span> t3 <span class="keyword">where</span> t3.content <span class="operator">=</span> <span class="string">&#x27;t3_522&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="image/image_du4G4s6J-y.png" alt="image"></p>
<p>MySQL5.5的结果</p>
<p><img src="image/image_aGTnMxUWho.png" alt="image"></p>
<p>注意：SUBQUERY和DEPENDENT SUBQUERY都是where后面的条件，subquery是单个值，dependent subquery是一组值。</p>
<p>UNCACHEABLE SUBQUREY：当使用了@@来引用系统变量的时候，不会使用缓存。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.id ,t2.content <span class="keyword">from</span> t2</span><br><span class="line">        <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">        <span class="keyword">select</span> t3.id ,t3.content <span class="keyword">from</span> t3 ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_IE6p8xzJWs.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.id ,t2.content <span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> t3.id, t3.content <span class="keyword">from</span> t3  <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> t1.id ,t1.content <span class="keyword">from</span> t1  ) t2;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_b8gFbCNPuf.png" alt="image"></p>
<p>UNION RESULT：从UNION表获取结果的SELECT。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> t2.id ,t2.content <span class="keyword">from</span> t2</span><br><span class="line">        <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">        <span class="keyword">select</span> t3.id ,t3.content <span class="keyword">from</span> t3 ;</span><br></pre></td></tr></table></figure>

<p>MySQL5.5结果</p>
<p><img src="image/image_HzVHL_eRZQ.png" alt="image"></p>
<h2 id="Explain-之type"><a href="#Explain-之type" class="headerlink" title="Explain 之type"></a>Explain 之type</h2><p>type是查询的访问类型，是较为重要的一个指标结果值从最好到最坏依次是：</p>
<p>system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL ，</p>
<p>一般来说，得保证查询至少达到range级别，最好能达到ref。</p>
<p>system：表只有一行记录（等于系统表），这是const类型的特列，平时不会出现，这个也可以忽略不计。</p>
<p>&#x20;const：表示通过索引一次就找到了,const用于比较primary key或者unique索引。因为只匹配一行数据，所以很快。如将主键置于where列表中，MySQL就能将该查询转换为一个常量。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN  <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 <span class="keyword">where</span> t1.id  <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_BYlZaMyFFs.png" alt="image"></p>
<p>&#x20;eq_ref：类似ref，区别在于使用的是唯一索引，使用逐渐的关联查询，关联查询出的记录只有一条。常见于主键或唯一索引描述。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 ,t2 <span class="keyword">where</span> t1.id <span class="operator">=</span> t2.id ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_KpUva78a5n.png" alt="image"></p>
<p>ref：非唯一性索引扫描，返回匹配某个单独值的所有行.本质上也是一种索引访问，它返回所有匹配某个单独值的行，然而，它可能会找到多个符合条件的行，所以他应该属于查找和扫描的混合体。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 ,t2 <span class="keyword">where</span> t1.content <span class="operator">=</span> t2.content;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_SH1hWrOVBd.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_t2_content <span class="keyword">on</span> t2(content);</span><br><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 ,t2 <span class="keyword">where</span> t1.content <span class="operator">=</span> t2.content;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_16V4uKYSlp.png" alt="image"></p>
<p>&#x20;range：只检索给定范围的行,使用一个索引来选择行。key 列显示使用了哪个索引一般就是在你的where语句中出现了between、&lt;、&gt;、in等的查询这种范围扫描索引扫描比全表扫描要好，因为它只需要开始于索引的某一点，而结束语另一点，不用扫描全部索引。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 <span class="keyword">where</span> t1.id <span class="operator">&gt;</span><span class="number">10</span> ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image__BN2RtYTWg.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 <span class="keyword">where</span> t1.id <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span> ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_UbYn-CLnFu.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 <span class="keyword">where</span> t1.id <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><img src="image/image_795E1c69X3.png" alt="image"></p>
<p>&#x20;index：出现index是sql使用了索引但是没用通过索引进行过滤，一般是使用了覆盖索引或者是利用索引进行了排序分组。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1;</span><br><span class="line">EXPLAIN <span class="keyword">select</span> id <span class="keyword">from</span> t1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_vNfxSL0KHW.png" alt="image"></p>
<p>&#x20;all：Full Table Scan，将遍历全表以找匹配的行。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1 ,t2 <span class="keyword">where</span> t1.content <span class="operator">=</span> t2.content ;</span><br></pre></td></tr></table></figure>

<p>index_merge：在查询过程中需要多个索引组合使用，通常出现在有 or 的关键字的sql中。</p>
<p><img src="image/image_osmerq__RZ.png" alt="image"></p>
<p>ref_or_null：对于某个字段既需要关联条件，也需要null值得情况下。查询优化器会选择用ref_or_null连接查询。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.content <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> t2.content <span class="operator">=</span> <span class="string">&#x27;abc&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_C0I-jgeBgt.png" alt="image"></p>
<p>&#x20;index_subquery：利用索引来关联子查询，不再全表扫描。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_t3_content <span class="keyword">on</span> t3(content);</span><br><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.content <span class="keyword">in</span> (<span class="keyword">select</span> t3.content <span class="keyword">from</span> t3) ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_gBkVIrEzq_.png" alt="image"></p>
<p>MySQL5.5的结果:&#x20;</p>
<p><img src="image/image_wTw4YxbRd0.png" alt="image"></p>
<p>unique_subquery：该联接类型类似于index_subquery。 子查询中的唯一索引。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t2 <span class="keyword">where</span> t2.id <span class="keyword">in</span> (<span class="keyword">select</span> t3.id <span class="keyword">from</span> t3 );</span><br></pre></td></tr></table></figure>

<p><img src="image/image_02xUAV97lH.png" alt="image"></p>
<p>MySQL5.5的结果</p>
<p><img src="image/image_zpbT_jm6p5.png" alt="image"></p>
<p>说明：一般来说，得保证查询至少达到range级别，最好能达到ref。</p>
<h2 id="Explain-之possible-keys"><a href="#Explain-之possible-keys" class="headerlink" title="Explain 之possible_keys"></a>Explain 之possible_keys</h2><p>显示可能应用在这张表中的索引，一个或多个。查询涉及到的字段上若存在索引，则该索引将被列出，但不一定被查询实际使用。</p>
<h2 id="x20-Explain-之-key"><a href="#x20-Explain-之-key" class="headerlink" title="&#x20;Explain 之 key"></a>&#x20;Explain 之 key</h2><p>实际使用的索引。如果为NULL，则没有使用索引。</p>
<h2 id="x20-Explain-之-key-len"><a href="#x20-Explain-之-key-len" class="headerlink" title="&#x20;Explain 之 key_len"></a>&#x20;Explain 之 key_len</h2><p>表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度。 key_len字段能够帮你检查是否充分的利用上了索引。ken_len越长，说明索引使用的越充分。</p>
<p><img src="image/image_LKt4beTSmW.png" alt="image"></p>
<p><img src="image/image_UWtYawlMdJ.png" alt="image"></p>
<p>如何计算：</p>
<ul>
<li><p>  先看索引上字段的类型+长度比如 int=4 ;  varchar(20) =20 ; char(20) =20&#x20;</p>
</li>
<li><p>  如果是varchar或者char这种字符串字段，视字符集要乘不同的值，比如utf-8  要乘 3,GBK要乘2</p>
</li>
<li><p>  varchar这种动态字符串要加2个字节</p>
</li>
<li><p>  允许为空的字段要加1个字节&#x20;</p>
</li>
</ul>
<p>第一组：key_len=age的字节长度：name的字节长度=4+1  + ( 20*3+2)=5+62=67</p>
<p>第二组：key_len=age的字节长度：4+1=5</p>
<p><img src="image/image_DHxd0zam39.png" alt="image"></p>
<h2 id="x20-Explain-之-ref"><a href="#x20-Explain-之-ref" class="headerlink" title="&#x20;Explain 之 ref"></a>&#x20;Explain 之 ref</h2><p>显示索引的哪一列被使用了，如果可能的话，是一个常数。哪些列或常量被用于查找索引列上的值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_name_t_emp <span class="keyword">on</span> t_emp(name);</span><br><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_emp emp ,t_dept dept  <span class="keyword">where</span> emp.name <span class="operator">=</span> <span class="string">&#x27;aaa&#x27;</span> <span class="keyword">and</span> emp.deptId <span class="operator">=</span> dept.id ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_Q2deVE7hI2.png" alt="image"></p>
<h2 id="Explain-之-rows"><a href="#Explain-之-rows" class="headerlink" title="Explain 之 rows"></a>Explain 之 rows</h2><p>rows列显示MySQL认为它执行查询时必须检查的行数。越少越好！</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_name_t_emp <span class="keyword">on</span> t_emp(name);</span><br><span class="line">EXPLAIN <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_emp emp ,t_dept dept  <span class="keyword">where</span> emp.name <span class="operator">=</span> <span class="string">&#x27;aaa&#x27;</span> <span class="keyword">and</span> emp.deptId <span class="operator">=</span> dept.id ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_PEogbOQFgC.png" alt="image"></p>
<h2 id="Explain-之-Extra-x20"><a href="#Explain-之-Extra-x20" class="headerlink" title="Explain 之 Extra&#x20;"></a>Explain 之 Extra&#x20;</h2><p>Using filesort：说明mysql会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。MySQL中无法利用索引完成的排序操作称为“文件排序”。</p>
<p>注意: 测试表数据不能太小。</p>
<p>优化前：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id ,empno ,name  <span class="keyword">from</span> t_emp <span class="keyword">where</span> deptid <span class="operator">=</span> <span class="number">100</span> <span class="keyword">order</span> <span class="keyword">by</span> name limit <span class="number">10</span> ;</span><br></pre></td></tr></table></figure>

<p>优化后：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_name_emp_1 <span class="keyword">on</span> emp(name);</span><br><span class="line">explain <span class="keyword">select</span> id ,empno ,name <span class="keyword">from</span> emp <span class="keyword">where</span> deptId <span class="operator">=</span> <span class="number">100</span>  <span class="keyword">order</span> <span class="keyword">by</span> name limit <span class="number">10</span> ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_ooIFXUStBN.png" alt="image"></p>
<p>Using temporary：使用临时表保存中间结果,MySQL在对查询结果排序时使用临时表。常见于排序 order by 和分组查询 group by。</p>
<p>优化前：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span>  name, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">where</span> deptid <span class="operator">=</span> <span class="number">100</span> <span class="keyword">group</span> <span class="keyword">by</span> name limit <span class="number">10</span> ;</span><br></pre></td></tr></table></figure>

<p>优化后：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_name_emp_1 <span class="keyword">on</span> emp(name);</span><br><span class="line">explain <span class="keyword">select</span>  name, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">where</span> deptid <span class="operator">=</span> <span class="number">100</span> <span class="keyword">group</span> <span class="keyword">by</span> name limit <span class="number">10</span> ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="image/image_6mqH39QxMX.png" alt="image"></p>
<p>Using index：表示相应的select操作中使用了覆盖索引(Covering Index)，避免访问了表的数据行，效率不错！如果同时出现using where，表明索引被用来执行索引键值的查找;如果没有同时出现using where，表明索引只是用来读取数据而非利用索引执行查找。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id <span class="keyword">from</span> emp <span class="keyword">where</span> id <span class="operator">&gt;</span><span class="number">1000</span> <span class="keyword">order</span> <span class="keyword">by</span>  id ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_bFHK7TDpcl.png" alt="image"></p>
<p>Using where：表明使用了where过滤。</p>
<p>Using join buffer：使用了连接缓存。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp ,dept <span class="keyword">where</span> emp.empno <span class="operator">=</span> dept.ceo ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_ATGfX9FwDj.png" alt="image"></p>
<p>impossible where：where子句的值总是false，不能用来获取任何元组。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> empno, name <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">&gt;</span><span class="number">200000</span> <span class="keyword">and</span> empno <span class="operator">&lt;</span> <span class="number">100000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_NgjYWUggv1.png" alt="image"></p>
<p>MySQL5.5的结果</p>
<p><img src="image/image_SzZAIvzcLh.png" alt="image"></p>
<p>select tables optimized away：在没有GROUPBY子句的情况下，基于索引优化MIN/MAX操作或者对于MyISAM存储引擎优化COUNT(*)操作，不必等到执行阶段再进行计算，查询Explian生成的阶段即完成优化。</p>
<p>在innodb中：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="built_in">max</span>(id) <span class="keyword">from</span> emp ;</span><br></pre></td></tr></table></figure>

<p><img src="image/image_7qo1X1iKt9.png" alt="image"></p>
<p>在Myisam中：</p>
<p><img src="image/image_RhOCvs8QDZ.png" alt="image"></p>
<h1 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h1><p><strong>InnoDB存储引擎</strong></p>
<p>InnoDB是MySQL的默认事务型引擎，它被设计用来处理大量的短期(short-lived)事务。除非有非常特别的原因需要使用其他的存储引擎，否则应该优先考虑InnoDB引擎。</p>
<p><strong>MyISAM存储引擎</strong></p>
<p>MyISAM提供了大量的特性，包括全文索引、压缩、空间函数(GIS)等，但MyISAM不支持事务和行级锁，有一个毫无疑问的缺陷就是崩溃后无法安全恢复。</p>
<p><strong>Archive引擎</strong></p>
<p>Archive档案存储引擎只支持INSERT和SELECT操作，在MySQL5.1之前不支持索引。</p>
<p>Archive表适合日志和数据采集类应用。</p>
<p>根据英文的测试结论来看，Archive表比MyISAM表要小大约75%，比支持事务处理的InnoDB表小大约83%。</p>
<p>** Blackhole引擎**</p>
<p>Blackhole引擎没有实现任何存储机制，它会丢弃所有插入的数据，不做任何保存。但服务器会记录Blackhole表的日志，所以可以用于复制数据到备库，或者简单地记录到日志。但这种应用方式会碰到很多问题，因此并不推荐。</p>
<p><strong>CSV引擎</strong></p>
<p>CSV引擎可以将普通的CSV文件作为MySQL的表来处理，但不支持索引。</p>
<p>CSV引擎可以作为一种数据交换的机制，非常有用。</p>
<p>CSV存储的数据直接可以在操作系统里，用文本编辑器，或者excel读取。</p>
<p><strong>Memory引擎</strong></p>
<p>如果需要快速地访问数据，并且这些数据不会被修改，重启以后丢失也没有关系，那么使用Memory表是非常有用。Memory表至少比MyISAM表要快一个数量级。</p>
<p><strong>Federated引擎</strong></p>
<p>Federated引擎是访问其他MySQL服务器的一个代理，尽管该引擎看起来提供了一种很好的跨服务器的灵活性，但也经常带来问题，因此默认是禁用的。</p>
<p><strong>MyISAM和InnoDB引擎</strong></p>
<table>
<thead>
<tr>
<th>对比项</th>
<th>MyISAM</th>
<th>InnoDB</th>
</tr>
</thead>
<tbody><tr>
<td>外键</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>事务</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>行表锁</td>
<td>表锁，即使操作一条记录也会锁住整个表，不适合高并发的操作</td>
<td>行锁,操作时只锁某一行，不对其它行有影响，&#xA;&#xA;适合高并发的操作</td>
</tr>
<tr>
<td>缓存</td>
<td>只缓存索引，不缓存真实数据</td>
<td>不仅缓存索引还要缓存真实数据，对内存要求较高，而且内存大小对性能有决定性的影响</td>
</tr>
<tr>
<td>关注点</td>
<td>读性能</td>
<td>并发写、事务、资源</td>
</tr>
<tr>
<td>默认安装</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>默认使用</td>
<td>N</td>
<td>Y</td>
</tr>
<tr>
<td>自带系统表使用</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody></table>
<p>MyISAM不支持外键，InnoDB支持外键；MyISAM使用是表锁，即操作一条记录也会锁住整个表，不适合高并发的操作，InnoDB使用的是行锁，操作时只锁某一行，不对其他行有影响，适合高并发的操作；MyISAM只缓存索引，不缓存真实数据，InnoDB不仅缓存索引还要缓存真实数据，对内存要求较高，而且内存大小对性能有决定性的影响，因此InnoDB写的处理比MyISAM的效率差一些，并且会占用更多的磁盘空间已保留数据和索引。InnoDB提供了具有提交、回滚、崩溃恢复能力的事务安全。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/GameWill.github.io/tags/MySQL/" rel="tag"># MySQL</a>
              <a href="/GameWill.github.io/tags/MySQL%E9%AB%98%E7%BA%A7/" rel="tag"># MySQL高级</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/GameWill.github.io/2021/10/30/MySQL%E5%9F%BA%E7%A1%80/" rel="prev" title="MySQL基础">
                  <i class="fa fa-chevron-left"></i> MySQL基础
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/GameWill.github.io/2021/11/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/" rel="next" title="计算机网络概述">
                  计算机网络概述 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Little Will</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Symbols count total">90k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">1:22</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/GameWill.github.io/js/comments.js"></script><script src="/GameWill.github.io/js/utils.js"></script><script src="/GameWill.github.io/js/motion.js"></script><script src="/GameWill.github.io/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/GameWill.github.io/js/third-party/search/local-search.js"></script>





  





<script src="/GameWill.github.io/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/GameWill.github.io/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
